# Use the PyTorch CUDA image as base
FROM pytorch/pytorch:2.6.0-cuda12.4-cudnn9-devel

# Set up working directory
WORKDIR /app

# Install git, tmux, vim and other dependencies
RUN apt-get update && apt-get install -y \
    git \
    tmux \
    vim \
    && rm -rf /var/lib/apt/lists/*

# Install Python libraries
# Replace these with your specific required libraries
RUN pip install --no-cache-dir \
    accelerate \
    codetiming \
    datasets \
    dill \
    flash-attn \
    hydra-core \
    liger-kernel \
    numpy \
    pandas \
    peft \
    pyarrow==19.0.1 \
    pybind11 \
    pylatexenc \
    ray[default] \
    tensordict==0.6.0 \
    torchdata \
    transformers \
    vllm==0.8.1 \
    wandb \
    liger-kernel \
    flash-attn \
    math-verify \
    kaggle \
    kagglehub \
    flashinfer-python \
    jupyter \
    jupyterlab

# Optional: Set default command
CMD ["/bin/bash"]