# Use the PyTorch CUDA image as base
FROM pytorch/pytorch:2.6.0-cuda12.4-cudnn9-devel

# Set up working directory
WORKDIR /app

# Install git and other dependencies
RUN apt-get update && apt-get install -y \
    git \
    && rm -rf /var/lib/apt/lists/*

# Clone git repository
RUN git clone https://github.com/hav4ik/verl.git . -b dapo-lora

# Install the cloned repository in editable mode
RUN pip install -e .[gpu,math]

# Optional: Set default command
CMD ["/bin/bash"]